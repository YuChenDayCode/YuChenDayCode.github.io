---
title: C#与Java二进制编码转换，补码
date:  2019-3-5 11:23:35
tags: C#、Java
---
 # C#与Java二进制编码转换，补码

- 在C#与Java接口对接时，需要将图片转化为二进制编码传输，这时候发现c#转换出来的编码的值是0~255的范围，而java方需要的是-128~127的编码范围，需要把编码做一个转换

- byte的范围是0-255,sbyte的范围是-128~127，实际上就是把byte转换为sbyte
```c#
sbyte[] sbyt = Array.ConvertAll(ret, s => (sbyte)s);
 
//两种效果相同
 
public static sbyte[] ToJavaBytes(byte[] bytes)
        {
            int l = bytes.Length;
            sbyte[] sbytes = new sbyte[l];
            for (int i = 0; i < l; i++)
            {
                var b = bytes[i];
                if (b > 127)
                    //sbytes[l - 1 - i] = (sbyte)(b - 256);
                    sbytes[i] = (sbyte)(b - 256);
                else
                    //sbytes[l - 1 - i] = (sbyte)b;
                    sbytes[i] = (sbyte)b;
            }
            return sbytes;
        }
```
掉头发..